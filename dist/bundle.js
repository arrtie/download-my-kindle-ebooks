"use strict";(()=>{function r(n){return function(t){return n.querySelector(t)}}function a(n){return function(t){return Array.from(n.querySelectorAll(t).values())}}var m=(n,e)=>{let t=Array.from(n.querySelectorAll("*")).filter(o=>o.textContent===e);return t.length===0?(console.warn(`cannot find child element with text content "${e}" in parent "${n.tagName}"`),null):t[0]};function g(){let n=a(document.documentElement),e=d(n("tbody"),"missing tbody"),o=a(e)("tr"),i=new Map;return o.forEach(l=>{let s=r(l)("[class='digital_entity_title']");s?.textContent!=null&&i.set(s.textContent,l)}),i}var d=(n,e)=>{if(n?.length==0)throw new Error(e);return n[0]};var E="Download & transfer via USB",T="[id^='DOWNLOAD_AND_TRANSFER_DIALOG']",p="[id$='CONFIRM']";function u(n,e){let t=n();return t==null?(console.warn(e),!1):(t.click(),!0)}async function f(n,e,t){return e==0?(console.warn(`ran out of retries getting ${t}`),Promise.resolve(!1)):u(n,`failed to find ${t}`)?(console.log("Success!"),Promise.resolve(!0)):new Promise(o=>{console.warn("trying again"),setTimeout(()=>{o(f(n,e-1,t))},1e3)})}async function c(){let n=g();if(n==null){console.error("no title map");return}let e=Array.from(n.entries()).map(([t,o])=>({title:t,row:o,openDialogButton:m(o,E),dialog:r(o)(T)})).filter(t=>t.openDialogButton!=null&&t.dialog!=null);for(;e.length>0;){let t=e.shift();if(t==null)break;t.openDialogButton.click();let o=r(t.dialog);if(!u(()=>o("input[type='radio']"),"missing radio button")||!u(()=>o(p),"missing confirm download button"))break;let s=await f(()=>r(document.documentElement)("[id='notification-close']"),3,"success notification close button")}}async function D(){c()}D();})();
//# sourceMappingURL=bundle.js.map
